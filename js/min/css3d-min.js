$(function(){function e(){i=new THREE.Scene,o=new THREE.Scene,a=new THREE.PerspectiveCamera(75,u/h,.1,1e3),r=new THREE.CSS3DRenderer,r.setSize(u,h),d=new THREE.WebGLRenderer({alpha:!0}),d.setSize(u,h),d.domElement.style.position="absolute",d.domElement.style.zIndex=0,$("#three").append(d.domElement),$("#three").append(r.domElement),s=new THREE.Object3D,m=new THREE.Object3D,i.add(s);var e=document.createElement("iframe");e.src="https://bandcamp.com/EmbeddedPlayer/album=1406266098/size=large/bgcol=ffffff/linkcol=7137dc/tracklist=false/transparent=true/",e.width=400,e.height=600,e.setAttribute("frameborder","0"),CSSbandcamp=new THREE.CSS3DObject(e),CSSbandcamp.position.set(200,-60,-300),CSSbandcamp.rotation.y=120*Math.PI/180,s.add(CSSbandcamp);var t=document.createElement("iframe");t.src="https://www.youtube.com/embed/HeefP7_0CbM?fs=0",t.width=640,t.height=385,t.setAttribute("frameborder","0"),CSSguillovid=new THREE.CSS3DObject(t),CSSguillovid.position.set=0,s.add(CSSguillovid);var w=document.createElement("iframe");w.src="instagram.html",w.width=580,w.height=580,w.setAttribute("frameborder","0"),CSSinsta=new THREE.CSS3DObject(w),CSSinsta.position.set(-200,-40,-300),CSSinsta.rotation.y=240*Math.PI/180,s.add(CSSinsta),H=new SPE.Group({texture:THREE.ImageUtils.loadTexture("./images/snowpart.png"),maxAge:2,blending:THREE.AdditiveBlending}),C=new SPE.Emitter({positionSpread:new THREE.Vector3(2e3,2e3,2e3),acceleration:new THREE.Vector3(0,0,0),velocity:new THREE.Vector3(0,0,0),colorStart:new THREE.Color("white"),colorEnd:new THREE.Color("white"),sizeStart:3,sizeEnd:3,opacityStart:0,opacityMiddle:1,opacityEnd:0,particleCount:4e4}),H.addEmitter(C),m.add(H.mesh),$(window).resize(function(){u=window.innerWidth,h=window.innerHeight,r.setSize(u,h),a.aspect=u/h,a.updateProjectionMatrix()}),document.addEventListener("mousemove",n,!1),a.position.z=900,E=new THREE.HemisphereLight(16777215,16777215,.5),E.position.set(0,50,0),i.add(E),c=new THREE.PointLight(65535,.5,100),c.position.set(0,0,-40),i.add(c),o.add(m),$(".larrow").click(function(){var e={y:s.rotation.y};console.log(e);var t={y:s.rotation.y+120*Math.PI/180},n=new TWEEN.Tween(e).to(t,1500);n.easing(TWEEN.Easing.Cubic.InOut),n.onUpdate(function(){s.rotation.y=e.y,m.rotation.y=e.y}),n.start()}),$(".rarrow").click(function(){var e={y:s.rotation.y},t={y:s.rotation.y-120*Math.PI/180},n=new TWEEN.Tween(e).to(t,1500);n.easing(TWEEN.Easing.Cubic.InOut),n.onUpdate(function(){s.rotation.y=e.y,m.rotation.y=e.y}),n.start()})}function t(){requestAnimationFrame(t),H.tick(.02),d.render(o,a),r.render(i,a),a.position.x+=.05*(T-a.position.x),a.position.y+=.05*(-mouseY-a.position.y),a.lookAt(s.position),TWEEN.update()}function n(e){T=e.clientX-f,mouseY=e.clientY-g}var i,o,a,r,d,E,c,s,m,w,l,p,S,u=window.innerWidth,h=window.innerHeight,y,b=window.matchMedia("(min-width: 500px)"),T=mouseY=0,f=u/2,g=h/2,H,C,R=2;e(),t()});
